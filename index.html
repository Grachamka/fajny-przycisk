<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fajny Przycisk PRO</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0a0f2c;
  color:white;
  text-align:center;
  overflow:hidden;
}

#starCanvas{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:0;
  display:none;
}

.app{
  position:relative;
  z-index:5;
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}

#mainButton{
  width:80%;
  max-width:600px;
  height:120px;
  font-size:60px;
  border-radius:30px;
  border:none;
  background:red;
  color:white;
}

.shop{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:black;
  display:none;
  overflow:auto;
  padding:20px;
  z-index:20;
}

.item{
  background:#222;
  padding:15px;
  margin:10px;
  border-radius:10px;
}
</style>
</head>

<body>

<canvas id="starCanvas"></canvas>

<div class="app">
  <h1>FAJNY PRZYCISK</h1>
  <p id="points">Punkty: 0</p>
  <button id="mainButton">?</button>
  <br>
  <button onclick="openShop()">SKLEP</button>
</div>

<div class="shop" id="shop">
  <h2>SKLEP</h2>
  <button onclick="closeShop()">Zamknij</button>

  <div class="item">
    ðŸŒŒ TÅ‚o Kosmos (200)
    <button onclick="buyBackground('space',200)">Kup</button>
  </div>

  <div class="item">
    ðŸŒ‘ Ciemne TÅ‚o (100)
    <button onclick="buyBackground('dark',100)">Kup</button>
  </div>

  <div class="item">
    ðŸ”¥ Ognisty Skin (300)
    <button onclick="buySkin('fire',300)">Kup</button>
  </div>

  <div class="item">
    âš¡ Turbo (400)
    <button onclick="buyTurbo(400)">Kup</button>
  </div>

  <div class="item">
    ðŸŽµ Muzyka (250)
    <button onclick="buyMusic(250)">Kup</button>
  </div>

  <h3>Ekwipunek:</h3>
  <div id="inventory"></div>

</div>

<script>

let state = {
  points: parseInt(localStorage.getItem("points")||"0"),
  ownedSkins: JSON.parse(localStorage.getItem("ownedSkins")||'["red"]'),
  activeSkin: localStorage.getItem("activeSkin") || "red",
  ownedBackgrounds: JSON.parse(localStorage.getItem("ownedBackgrounds")||'["default"]'),
  activeBackground: localStorage.getItem("activeBackground") || "default",
  musicBought: localStorage.getItem("musicBought")==="true",
  turbo:false
};

let music = new Audio("https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3");
music.loop=true;

function save(){
  localStorage.setItem("points",state.points);
  localStorage.setItem("ownedSkins",JSON.stringify(state.ownedSkins));
  localStorage.setItem("activeSkin",state.activeSkin);
  localStorage.setItem("ownedBackgrounds",JSON.stringify(state.ownedBackgrounds));
  localStorage.setItem("activeBackground",state.activeBackground);
  localStorage.setItem("musicBought",state.musicBought);
}

function update(){
  document.getElementById("points").innerText="Punkty: "+state.points;
  let inv=document.getElementById("inventory");
  inv.innerHTML="";

  state.ownedSkins.forEach(s=>{
    let b=document.createElement("button");
    b.innerText="Skin "+s;
    b.onclick=()=>{
      state.activeSkin=s;
      applySkin();
      save();
    };
    inv.appendChild(b);
  });

  state.ownedBackgrounds.forEach(bg=>{
    let b=document.createElement("button");
    b.innerText="TÅ‚o "+bg;
    b.onclick=()=>{
      state.activeBackground=bg;
      applyBackground();
      save();
    };
    inv.appendChild(b);
  });
}

function applySkin(){
  let btn=document.getElementById("mainButton");
  if(state.activeSkin==="fire"){
    btn.style.background="linear-gradient(45deg,orange,red,yellow)";
  }else{
    btn.style.background="red";
  }
}

function applyBackground(){
  if(state.activeBackground==="space"){
    startStars();
  }else if(state.activeBackground==="dark"){
    document.body.style.background="#111";
  }else{
    document.body.style.background="#0a0f2c";
    stopStars();
  }
}

function buySkin(name,cost){
  if(state.points<cost)return alert("Za maÅ‚o punktÃ³w");
  state.points-=cost;
  state.ownedSkins.push(name);
  save();
  update();
}

function buyBackground(name,cost){
  if(state.points<cost)return alert("Za maÅ‚o punktÃ³w");
  state.points-=cost;
  state.ownedBackgrounds.push(name);
  save();
  update();
}

function buyTurbo(cost){
  if(state.points<cost)return alert("Za maÅ‚o punktÃ³w");
  state.points-=cost;
  state.turbo=true;
  save();
  update();
}

function buyMusic(cost){
  if(state.points<cost)return alert("Za maÅ‚o punktÃ³w");
  state.points-=cost;
  state.musicBought=true;
  save();
  update();
}

document.getElementById("mainButton").onclick=()=>{
  state.points++;
  if(state.musicBought){
    music.play().catch(()=>{});
  }
  update();
  save();
};

function openShop(){
  document.getElementById("shop").style.display="block";
}

function closeShop(){
  document.getElementById("shop").style.display="none";
}

/* Kosmos */
let canvas=document.getElementById("starCanvas");
let ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let stars=[];
for(let i=0;i<100;i++){
  stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height});
}

function startStars(){
  canvas.style.display="block";
  animate();
}

function stopStars(){
  canvas.style.display="none";
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="white";
  stars.forEach(s=>{
    ctx.fillRect(s.x,s.y,2,2);
    s.y+=1;
    if(s.y>canvas.height)s.y=0;
  });
  requestAnimationFrame(animate);
}

applySkin();
applyBackground();
update();

</script>

</body>
</html>
