<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fajny Przycisk BOX 3.0</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:radial-gradient(circle at center,#0a0f2c,#000814);
  color:white;
  text-align:center;
  overflow:hidden;
}

#points{
  position:fixed;
  top:10px;
  left:10px;
  font-size:20px;
}

#dropRates{
  position:fixed;
  bottom:10px;
  right:10px;
  font-size:14px;
  opacity:0.8;
}

button{
  padding:20px 40px;
  font-size:25px;
  border:none;
  border-radius:20px;
  cursor:pointer;
  margin:10px;
}

#mainButton{
  background:red;
  color:white;
}

#boxButton{
  background:purple;
  color:white;
}

#legendaryBanner{
  position:fixed;
  top:40%;
  width:100%;
  font-size:60px;
  color:gold;
  display:none;
  text-shadow:0 0 20px gold;
}

.goldBG{
  animation:goldShine 3s infinite linear;
  background:linear-gradient(45deg,gold,orange,yellow);
  background-size:400% 400%;
}

@keyframes goldShine{
  0%{background-position:0%}
  50%{background-position:100%}
  100%{background-position:0%}
}

#lootAnimation{
  position:fixed;
  top:30%;
  left:0;
  width:100%;
  display:none;
  overflow:hidden;
}

.lootRow{
  display:flex;
  transition:3s cubic-bezier(.2,.8,.2,1);
}

.lootItem{
  min-width:200px;
  margin:10px;
  padding:20px;
  border-radius:15px;
  font-size:20px;
}

.common{background:gray;}
.rare{background:blue;}
.epic{background:purple;}
.legendary{background:gold;color:black;}

</style>
</head>

<body>

<div id="points"></div>
<div id="dropRates">
Common 60%<br>
Rare 25%<br>
Epic 10%<br>
Legendary 5%
</div>

<h1>FAJNY PRZYCISK 3.0</h1>

<button id="mainButton" onclick="clickMain()">?</button>
<button id="boxButton" onclick="openBox()">üéÅ Otw√≥rz Skrzynkƒô (50 pkt)</button>

<div id="legendaryBanner">LEGENDARNY DROP!</div>

<div id="lootAnimation">
  <div class="lootRow" id="lootRow"></div>
</div>

<script>
let points = parseInt(localStorage.getItem("points") || 0);
let ownedSkins = JSON.parse(localStorage.getItem("skins") || '["red"]');
let activeSkin = localStorage.getItem("activeSkin") || "red";

updateUI();
applySkin();

function updateUI(){
  document.getElementById("points").innerText="Punkty: "+points;
  localStorage.setItem("points",points);
}

function clickMain(){
  points+=1;
  updateUI();
  new Audio("https://www.soundjay.com/buttons/sounds/button-16.mp3").play();
}

function openBox(){
  if(points<50){
    alert("Za ma≈Ço punkt√≥w!");
    return;
  }

  points-=50;
  updateUI();

  const lootRow=document.getElementById("lootRow");
  const lootAnim=document.getElementById("lootAnimation");
  lootRow.innerHTML="";
  lootAnim.style.display="block";

  let items=[];
  for(let i=0;i<20;i++){
    let rarityRoll=Math.random()*100;
    let rarity="common";
    if(rarityRoll<60) rarity="common";
    else if(rarityRoll<85) rarity="rare";
    else if(rarityRoll<95) rarity="epic";
    else rarity="legendary";

    items.push(rarity);
  }

  items.forEach(r=>{
    let div=document.createElement("div");
    div.className="lootItem "+r;
    div.innerText=r.toUpperCase();
    lootRow.appendChild(div);
  });

  setTimeout(()=>{
    lootRow.style.transform="translateX(-1500px)";
  },50);

  setTimeout(()=>{
    let finalRarity=items[10];
    reward(finalRarity);
    lootAnim.style.display="none";
    lootRow.style.transform="translateX(0px)";
  },3000);
}

function reward(rarity){

  if(rarity==="legendary"){
    document.body.classList.add("goldBG");
    document.getElementById("legendaryBanner").style.display="block";
    new Audio("https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3").play();
    setTimeout(()=>{
      document.getElementById("legendaryBanner").style.display="none";
    },2000);
  }

  if(!ownedSkins.includes(rarity)){
    ownedSkins.push(rarity);
    localStorage.setItem("skins",JSON.stringify(ownedSkins));
  }

  activeSkin=rarity;
  localStorage.setItem("activeSkin",activeSkin);
  applySkin();
}

function applySkin(){
  const btn=document.getElementById("mainButton");

  if(activeSkin==="common") btn.style.background="gray";
  if(activeSkin==="rare") btn.style.background="blue";
  if(activeSkin==="epic") btn.style.background="purple";
  if(activeSkin==="legendary") btn.style.background="gold";
  if(activeSkin==="red") btn.style.background="red";
}

</script>
</body>
</html>
